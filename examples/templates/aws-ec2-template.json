{
  "name": "aws-ec2-basic",
  "description": "Basic AWS EC2 instance template",
  "version": "1.0.0",
  "provider": "AWS",
  "gitRepo": "https://github.com/terraform-aws-modules/terraform-aws-ec2-instance",
  "gitBranch": "master",
  "parameters": {
    "type": "object",
    "required": ["instance_type", "ami", "region", "name"],
    "properties": {
      "name": {
        "type": "string",
        "description": "Name to be used for the instance"
      },
      "instance_type": {
        "type": "string",
        "description": "The type of instance to start",
        "enum": ["t2.micro", "t2.small", "t2.medium", "t3.micro", "t3.small", "t3.medium"]
      },
      "ami": {
        "type": "string",
        "description": "ID of AMI to use for the instance"
      },
      "region": {
        "type": "string",
        "description": "AWS region",
        "enum": ["us-east-1", "us-east-2", "us-west-1", "us-west-2", "eu-west-1", "eu-central-1"]
      },
      "subnet_id": {
        "type": "string",
        "description": "The VPC Subnet ID to launch in"
      },
      "vpc_security_group_ids": {
        "type": "array",
        "description": "A list of security group IDs to associate with",
        "items": {
          "type": "string"
        }
      },
      "associate_public_ip_address": {
        "type": "boolean",
        "description": "Whether to associate a public IP address with an instance in a VPC",
        "default": true
      },
      "key_name": {
        "type": "string",
        "description": "Key name of the Key Pair to use for the instance"
      },
      "user_data": {
        "type": "string",
        "description": "The user data to provide when launching the instance"
      },
      "tags": {
        "type": "object",
        "description": "A mapping of tags to assign to the resource",
        "default": {}
      }
    }
  },
  "resources": {
    "module": {
      "ec2_instance": {
        "source": "terraform-aws-modules/ec2-instance/aws",
        "version": "~> 3.0",
        "name": "${var.name}",
        "ami": "${var.ami}",
        "instance_type": "${var.instance_type}",
        "key_name": "${var.key_name}",
        "monitoring": true,
        "vpc_security_group_ids": "${var.vpc_security_group_ids}",
        "subnet_id": "${var.subnet_id}",
        "associate_public_ip_address": "${var.associate_public_ip_address}",
        "user_data": "${var.user_data}",
        "tags": "${var.tags}"
      }
    },
    "output": {
      "instance_id": {
        "value": "${module.ec2_instance.id}"
      },
      "instance_public_ip": {
        "value": "${module.ec2_instance.public_ip}"
      },
      "instance_private_ip": {
        "value": "${module.ec2_instance.private_ip}"
      }
    }
  }
}
