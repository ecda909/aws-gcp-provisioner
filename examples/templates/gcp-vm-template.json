{
  "name": "gcp-vm-basic",
  "description": "Basic GCP VM instance template",
  "version": "1.0.0",
  "provider": "GCP",
  "gitRepo": "https://github.com/terraform-google-modules/terraform-google-vm",
  "gitBranch": "master",
  "modulePath": "modules/compute_instance",
  "parameters": {
    "type": "object",
    "required": ["project_id", "region", "zone", "name", "machine_type"],
    "properties": {
      "project_id": {
        "type": "string",
        "description": "The GCP project ID"
      },
      "region": {
        "type": "string",
        "description": "The GCP region where the instance will be created",
        "enum": ["us-central1", "us-east1", "us-west1", "europe-west1", "asia-east1"]
      },
      "zone": {
        "type": "string",
        "description": "The GCP zone where the instance will be created"
      },
      "name": {
        "type": "string",
        "description": "Name of the instance"
      },
      "machine_type": {
        "type": "string",
        "description": "Machine type to create",
        "enum": ["e2-micro", "e2-small", "e2-medium", "n1-standard-1", "n1-standard-2"]
      },
      "source_image": {
        "type": "string",
        "description": "Source disk image",
        "default": "debian-cloud/debian-10"
      },
      "network": {
        "type": "string",
        "description": "Network to deploy to",
        "default": "default"
      },
      "subnetwork": {
        "type": "string",
        "description": "Subnet to deploy to",
        "default": "default"
      },
      "tags": {
        "type": "array",
        "description": "Network tags",
        "items": {
          "type": "string"
        },
        "default": []
      },
      "metadata": {
        "type": "object",
        "description": "Metadata key/value pairs",
        "default": {}
      },
      "startup_script": {
        "type": "string",
        "description": "Startup script to run when the instance starts"
      }
    }
  },
  "resources": {
    "module": {
      "vm_instance": {
        "source": "terraform-google-modules/vm/google//modules/compute_instance",
        "version": "~> 7.0",
        "project_id": "${var.project_id}",
        "region": "${var.region}",
        "zone": "${var.zone}",
        "name": "${var.name}",
        "machine_type": "${var.machine_type}",
        "source_image": "${var.source_image}",
        "network": "${var.network}",
        "subnetwork": "${var.subnetwork}",
        "tags": "${var.tags}",
        "metadata": "${var.metadata}",
        "startup_script": "${var.startup_script}"
      }
    },
    "output": {
      "instance_id": {
        "value": "${module.vm_instance.instance_id}"
      },
      "instance_name": {
        "value": "${module.vm_instance.name}"
      },
      "instance_external_ip": {
        "value": "${module.vm_instance.external_ip}"
      },
      "instance_internal_ip": {
        "value": "${module.vm_instance.internal_ip}"
      }
    }
  }
}
